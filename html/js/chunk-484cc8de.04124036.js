(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-484cc8de"],{"0e18":function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"i",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"j",(function(){return o})),a.d(e,"c",(function(){return u})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return b})),a.d(e,"h",(function(){return p})),a.d(e,"g",(function(){return h}));var n=a("b775");const i=t=>Object(n.a)(Object(n.b)({url:"/loan/create",method:"post",data:t})),r=t=>Object(n.a)(Object(n.b)({url:"/loan/update",method:"put",data:t})),l=t=>Object(n.a)(Object(n.b)({url:"/loan/delete/"+t,method:"delete"})),o=t=>Object(n.a)(Object(n.b)({url:"/loan/submitToApprove",method:"post",data:{id:t}}));function s(t,e){let a=`/approve/${t?"first":"end"}/`+(e?"pass":"reject");return function(t){return Object(n.a)(Object(n.b)({url:a,method:"post",data:{loanId:t,appId:t}}))}}const u=s(1,1),c=s(1,0),d=s(0,1),b=s(0,0),p=t=>Object(n.a)(Object(n.b)({url:"/contract/createFile",method:"post",data:{id:t}})),h=t=>Object(n.a)(Object(n.b)({url:"/contract/download",method:"get",params:{id:t}}))},"1b62":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return r}));var n={data(){return{currentPage:1,pageSizes:[10,20,30,40],pageSize:10,total:0,query:""}},computed:{frontPageOptions(){return{currentPage:this.currentPage,pageSize:this.pageSize,pageSizes:this.pageSizes,query:this.query,total:this.total}}},methods:{getApiPager(){let t={pageNo:this.currentPage,pageSize:this.pageSize};return this.query&&""!==this.query.trim()&&(t.name=this.query),t},setTotal(t){this.total=t},setQueryName(t){this.query=t,this.currentPage=1,this.init()},sizeChange(t){this.pageSize=t,this.init()},currentPageChange(t){this.currentPage=t,this.init()}}},i=a("b775"),r={methods:{beforeInit(){return!1},afterInit(){return null},async init(){if(await this.beforeInit()){var[t,e]=await Object(i.a)(Object(i.b)({url:this.url,...this.customField,params:{...this.getApiPager(),...this.params}}));if(this.afterInit(t),e)return this.$message("请求失败");this.tableData=null==t||null==(e=t.data)||null==(e=e.data)||null==(e=e.data)?void 0:e.data,this.setTotal(null==t||null==(e=t.data)||null==(t=e.data)?void 0:t.rows)}}}}},"7ffa":function(t,e,a){"use strict";a.r(e);var n=Object.freeze({options:{useIndex:!1,useMultiSelect:!1},columns:[{label:"姓名",prop:"name"},{label:"身份证",prop:"identity_card"},{label:"合同状态",prop:"status",slot:"status"},{label:"操作",width:1e3,prop:"opts",slot:"opts"}]}),i=a("1b62"),r=a("0e18"),l=a("ed08"),o=a("8bbf"),s=a.n(o);o={name:"contract",mixins:[i.b,i.a],methods:{async genContract(t){var e;await this.confirm("是否确认生成合同?")&&([t,e]=await Object(r.h)(t),t&&this.init())},async downloadContractFile(t){var e;if(await this.confirm("是否确认下载合同?")){var[a]=await Object(r.g)(t);if(a){let n=null==a||null==(e=a.data)||null==(e=e.data)?void 0:e.url;if(!n)return this.$message.error(a.data.data);await Object(l.c)(n.replace("/api",""),"贷款合同-"+t+".docx")}}},showInfo(t){this.dialogVisible=!0;let e=s.a.filter("birthday");this.editConf={items:[[{key:"id",label:"id",value:t.id}],[{key:"name",label:"姓名",value:t.name}],[{key:"birthday",label:"出生日期",value:e(t.birthday)}],[{key:"sex",label:"性别",value:t.sex}],[{key:"education",label:"教育程度",value:t.education}],[{key:"address1",label:"地址",value:t.address1}],[{key:"mobile_phone",label:"手机号",value:t.mobile_phone}],[{key:"identity_card",label:"身份证",value:t.identity_card}]].map(t=>t.map(t=>({...t,type:"input",colspan:24,attrs:{disabled:!0}})))}},beforeInit(){return this.url="/contract/list",this.customField={loadingTag:this.loadingTag},!0},afterInit(t){}},created(){this.init()},data(){return{conf:n,loadingTag:"tab7",tableData:[],dialogVisible:!1,editConf:{}}}},i=a("2877"),a=Object(i.a)(o,(function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"approve"}},[e("GSearchQuery",{on:{setValue:t.setQueryName}}),e("GTable",{attrs:{options:t.conf.options,pageOptions:t.frontPageOptions,data:t.tableData,loadingTag:t.loadingTag,columns:t.conf.columns},on:{handleCurrentChange:t.currentPageChange,"size-change":t.sizeChange},scopedSlots:t._u([{key:"status",fn:function(a){return[e("el-table-column",{attrs:{width:"140",align:"center",prop:a.prop,label:a.label},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("el-tag",{attrs:{type:t._f("contractColor")(a.status)}},[t._v(t._s(t._f("contractText")(a.status)))])]}}],null,!0)})]}},{key:"opts",fn:function(a){return[e("el-table-column",{attrs:{label:a.label,width:a.width},scopedSlots:t._u([{key:"default",fn:function({row:a}){return[e("el-button",{attrs:{disabled:5<a.status,type:"primary"},on:{click:function(e){return t.genContract(a.id)}}},[t._v("生成合同")]),e("el-button",{attrs:{disabled:a.status<5,type:"success"},on:{click:function(e){return t.downloadContractFile(a.id)}}},[t._v("下载合同")])]}}],null,!0)})]}}])})],1)}),[],!1,null,null,null);e.default=a.exports}}]);